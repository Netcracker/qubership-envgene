# Sync .github Folder Workflow

Этот workflow автоматически синхронизирует содержимое папки `.github` между ветками репозитория с учетом дат изменения файлов.

## Описание

Workflow `sync-github-folder.yml` предназначен для:

- Автоматической синхронизации папки `.github` из ветки `main` во все остальные ветки
- Защиты от перезаписи более новых изменений в целевых ветках
- Поддержания единообразия конфигурации GitHub Actions, линтеров и других настроек

## Триггеры

Workflow запускается в следующих случаях:

1. **Автоматически** при push в ветку `main` с изменениями в папке `.github/**`
2. **Вручную** через GitHub Actions UI с дополнительными параметрами

## Параметры ручного запуска

При ручном запуске workflow можно указать:

- `target_branches` - список целевых веток через запятую (если пусто, синхронизируются все ветки)
- `force_sync` - принудительная синхронизация даже если файлы в целевой ветке новее

## Логика работы

1. **Получение списка веток**: Получает все удаленные ветки, исключая `main`
2. **Проверка существования**: Проверяет существование каждой целевой ветки
3. **Сравнение дат**: Сравнивает даты последнего изменения файлов в папке `.github`:
   - Если файлы в `main` новее → синхронизация
   - Если файлы в целевой ветке новее → пропуск (защита от перезаписи)
   - Если папка `.github` отсутствует в целевой ветке → создание
4. **Синхронизация**: Копирует содержимое папки `.github` из `main` в целевую ветку
5. **Коммит и push**: Создает коммит с изменениями и пушит в целевую ветку

## Безопасность

- Workflow не перезаписывает более новые изменения в целевых ветках
- Использует временные ветки для синхронизации
- Автоматически очищает временные ветки после завершения
- Требует права на запись в репозиторий

## Примеры использования

### Автоматическая синхронизация

При изменении любого файла в папке `.github` в ветке `main` workflow автоматически запустится и синхронизирует изменения во все ветки.

### Ручная синхронизация конкретных веток

```bash
# Синхронизация только в ветки develop и feature/new-ui
target_branches: develop,feature/new-ui
force_sync: false
```

### Принудительная синхронизация

```bash
# Принудительная синхронизация во все ветки
target_branches: 
force_sync: true
```

## Мониторинг

Workflow выводит подробные логи для каждого этапа:

- Список доступных веток
- Статус проверки каждой ветки
- Результаты сравнения дат
- Успешность синхронизации

## Требования

- Права на запись в репозиторий
- Ветка `main` должна содержать актуальную версию папки `.github`
- Целевые ветки должны существовать в репозитории
